import { getBranding } from "@/lib/headkit/queries";
import { ImageResponse } from "next/og";

// Image metadata
export const size = {
  width: 32,
  height: 32,
};
export const contentType = "image/svg+xml";

// Image generation
export default async function Icon() {
  const {
    data: { branding },
  } = await getBranding();
  
  const alt = "Icon";
  const iconSize = 24;
  const standardSize = size;
  
  return new ImageResponse(
    (
      <div
        style={{
          display: 'flex',
          justifyContent: 'center',
          alignItems: 'center',
          width: '100%',
          height: '100%',
        }}
      >
        {branding?.iconUrl ? (
          // eslint-disable-next-line @next/next/no-img-element
          <img 
            src={branding?.iconUrl} 
            alt={alt}
            style={{
              width: `${iconSize}px`,
              height: `${iconSize}px`,
              objectFit: 'contain',
            }} 
          />
        ) : (
          <div style={{ width: `${iconSize}px`, height: `${iconSize}px`, color: '#FFFFFF', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
            <svg
              width="32"
              height="32"
              viewBox="0 0 57 54"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M28.1289 3.03765C28.3622 3.03765 28.5956 3.04905 28.8256 3.07185C29.0556 3.09465 29.2822 3.12885 29.502 3.17445C29.7218 3.2201 29.9348 3.27715 30.1376 3.34564C30.3405 3.41418 30.5332 3.49416 30.7121 3.58564L52.1867 14.5618C52.5703 14.7579 52.8643 14.9847 53.0675 15.2272C53.271 15.47 53.3834 15.7285 53.4034 15.9875C53.4234 16.2469 53.3506 16.5066 53.1837 16.7513C53.0165 16.9964 52.7549 17.2264 52.3976 17.4256L44.4031 21.884L32.4913 15.5813L27.361 18.3336L39.2795 24.7413L30.9235 29.4013C30.7315 29.5084 30.5242 29.6021 30.3055 29.6825C30.0866 29.763 29.8564 29.8301 29.6184 29.8837C29.3804 29.9374 29.1348 29.9777 28.8853 30.0046C28.6357 30.0314 28.3824 30.0448 28.129 30.0448C27.8756 30.0448 27.6223 30.0314 27.3728 30.0046C27.1233 29.9777 26.8776 29.9374 26.6396 29.8837C26.4017 29.8301 26.1714 29.763 25.9525 29.6825C25.7338 29.6021 25.5265 29.5084 25.3345 29.4013L3.86028 17.4256C3.50192 17.2264 3.23953 16.9964 3.07183 16.7513C2.90436 16.5066 2.83131 16.2469 2.8513 15.9875C2.87125 15.7285 2.98392 15.47 3.18794 15.2272C3.39167 14.9847 3.68651 14.7579 4.07118 14.5618L12.4153 10.2956L23.1448 16.0661L28.2751 13.3513L17.5433 7.67502L25.5456 3.58563C25.7246 3.49416 25.9172 3.41418 26.1201 3.34563C26.3229 3.27714 26.5359 3.2201 26.7558 3.17445C26.9756 3.12885 27.2022 3.09464 27.4322 3.07184C27.6621 3.04904 27.8955 3.03765 28.1289 3.03765ZM28.1289 0C27.8077 0 27.4846 0.0158971 27.1685 0.0472838C26.844 0.07944 26.5222 0.128358 26.2121 0.192674C25.8834 0.260941 25.5634 0.347421 25.2603 0.449752C24.9286 0.561848 24.6105 0.695246 24.3151 0.846225L16.3129 4.93556L12.4474 6.91092L12.4471 6.91074L11.1844 7.55634L11.0983 7.6004L11.0442 7.62806L2.84027 11.8226C2.12657 12.1864 1.52902 12.6502 1.06732 13.1998C0.448931 13.9357 0.0843521 14.8136 0.0130914 15.7387C-0.0637264 16.7353 0.198595 17.7048 0.771677 18.5423C1.20519 19.1759 1.8015 19.7064 2.54391 20.1193L24.015 32.0931C24.3293 32.2684 24.6689 32.4235 25.0243 32.5543C25.3511 32.6744 25.6961 32.7757 26.0503 32.8556C26.3861 32.9313 26.7348 32.989 27.0869 33.0268C27.43 33.0638 27.7806 33.0825 28.129 33.0825C28.4774 33.0825 28.828 33.0638 29.171 33.0268C29.5232 32.989 29.872 32.9313 30.2076 32.8556C30.5619 32.7757 30.9069 32.6744 31.2333 32.5544C31.5893 32.4235 31.9289 32.2683 32.243 32.0931L40.5989 27.4332L45.5147 24.6918L45.7225 24.5759L53.717 20.1175C54.4584 19.7041 55.0538 19.1728 55.4864 18.5384C56.0571 17.7018 56.3183 16.7336 56.2416 15.7386C56.1704 14.8151 55.807 13.9382 55.1907 13.2028C54.7296 12.6526 54.133 12.1883 53.4173 11.8224L31.9427 0.846271C31.6473 0.695295 31.3293 0.561897 30.9975 0.449798C30.6943 0.347375 30.3743 0.260941 30.0461 0.192811C29.7355 0.128362 29.4137 0.0794438 29.089 0.0472419C28.7732 0.015901 28.45 0 28.1289 0Z"
                fill="#23102E"
              />
              <path
                d="M55.1907 23.3281C54.7296 22.778 54.1329 22.3136 53.4172 21.9478L51.8612 21.1524L48.7097 22.91L52.1867 24.6872C52.5703 24.8833 52.8644 25.1101 53.0676 25.3525C53.2711 25.5954 53.3834 25.8539 53.4034 26.1128C53.4234 26.3722 53.3506 26.632 53.1837 26.8767C53.0165 27.1218 52.7549 27.3517 52.3976 27.551L44.4031 32.0094L38.2403 28.7485L33.1646 31.5792L39.2795 34.8666L30.9235 39.5266C30.7315 39.6337 30.5242 39.7275 30.3055 39.8079C30.0866 39.8883 29.8564 39.9554 29.6185 40.0091C29.3804 40.0628 29.1348 40.103 28.8852 40.1299C28.6357 40.1567 28.3824 40.1702 28.129 40.1702C27.8756 40.1702 27.6223 40.1567 27.3728 40.1299C27.1233 40.1031 26.8777 40.0628 26.6396 40.0091C26.4017 39.9554 26.1714 39.8883 25.9525 39.8079C25.7338 39.7275 25.5266 39.6337 25.3345 39.5266L3.86026 27.551C3.50197 27.3517 3.23957 27.1218 3.07184 26.8767C2.90437 26.632 2.83132 26.3722 2.85132 26.1128C2.87123 25.8539 2.98394 25.5954 3.18798 25.3525C3.39167 25.1101 3.68652 24.8832 4.07125 24.6872L7.54768 22.9097L4.39649 21.1523L2.84033 21.948C2.12668 22.3117 1.52908 22.7756 1.06735 23.3251C0.448979 24.061 0.0844257 24.939 0.0130935 25.864C-0.0637315 26.8608 0.19859 27.8303 0.771729 28.6677C1.20521 29.3012 1.80153 29.8318 2.54394 30.2447L24.0151 42.2185C24.3293 42.3938 24.6689 42.549 25.0243 42.6797C25.3511 42.7998 25.6961 42.901 26.0502 42.981C26.3862 43.0567 26.7349 43.1143 27.0869 43.1522C27.43 43.1891 27.7806 43.2079 28.129 43.2079C28.4774 43.2079 28.828 43.1891 29.1711 43.1522C29.5232 43.1143 29.8719 43.0567 30.2075 42.981C30.5619 42.901 30.9069 42.7998 31.2331 42.6798C31.5893 42.5489 31.9289 42.3937 32.243 42.2185L40.5989 37.5586L44.437 35.4182L45.7225 34.7013L53.7171 30.2429C54.4585 29.8294 55.0538 29.2982 55.4865 28.6638C56.0571 27.8273 56.3183 26.859 56.2416 25.8639C56.1704 24.9405 55.8071 24.0636 55.1907 23.3281Z"
                fill="#23102E"
              />
              <path
                d="M55.1907 33.4536C54.7296 32.9034 54.1329 32.4391 53.4172 32.0733L51.8612 31.2779L48.7097 33.0355L52.1867 34.8127C52.5703 35.0087 52.8644 35.2356 53.0676 35.478C53.2711 35.7208 53.3834 35.9794 53.4034 36.2383C53.4234 36.4977 53.3506 36.7574 53.1837 37.0022C53.0165 37.2473 52.7549 37.4772 52.3976 37.6765L44.4031 42.1349L38.2403 38.874L33.1646 41.7046L39.2795 44.9921L30.9235 49.6521C30.7315 49.7592 30.5242 49.853 30.3055 49.9333C30.0866 50.0138 29.8564 50.0809 29.6185 50.1346C29.3804 50.1883 29.1348 50.2285 28.8852 50.2554C28.6357 50.2822 28.3824 50.2957 28.129 50.2957C27.8756 50.2957 27.6223 50.2822 27.3728 50.2554C27.1233 50.2285 26.8777 50.1883 26.6396 50.1346C26.4017 50.0809 26.1714 50.0138 25.9525 49.9333C25.7338 49.853 25.5266 49.7592 25.3345 49.6521L3.86026 37.6765C3.50197 37.4772 3.23957 37.2473 3.07184 37.0022C2.90437 36.7574 2.83132 36.4977 2.85132 36.2383C2.87123 35.9794 2.98394 35.7208 3.18798 35.478C3.39167 35.2356 3.68652 35.0087 4.07125 34.8127L7.54768 33.0352L4.39649 31.2778L2.84033 32.0735C2.12668 32.4372 1.52908 32.9011 1.06735 33.4506C0.448979 34.1865 0.0844257 35.0645 0.0130935 35.9895C-0.0637315 36.9863 0.19859 37.9558 0.771729 38.7932C1.20521 39.4267 1.80153 39.9573 2.54394 40.3701L24.0151 52.344C24.3293 52.5193 24.6689 52.6744 25.0243 52.8051C25.3511 52.9253 25.6961 53.0265 26.0502 53.1065C26.3862 53.1822 26.7349 53.2398 27.0869 53.2777C27.43 53.3146 27.7806 53.3334 28.129 53.3334C28.4774 53.3334 28.828 53.3146 29.1711 53.2777C29.5232 53.2398 29.8719 53.1822 30.2075 53.1065C30.5619 53.0265 30.9069 52.9253 31.2331 52.8053C31.5893 52.6743 31.9289 52.5192 32.243 52.3439L40.5989 47.6841L44.437 45.5437L45.7225 44.8268L53.7171 40.3684C54.4585 39.9549 55.0538 39.4237 55.4865 38.7893C56.0571 37.9528 56.3183 36.9845 56.2416 35.9894C56.1704 35.066 55.8071 34.189 55.1907 33.4536Z"
                fill="#23102E"
              />
            </svg>
          </div>
        )}
      </div>
    ),
    {
      ...standardSize,
    }
  );
}
